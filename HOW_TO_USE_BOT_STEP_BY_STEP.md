# MAX Contest Bot — Инструкция с нуля (очень просто)

Документ для тех, кто вообще не хочет разбираться в технике.
Делайте шаги по порядку, ничего не пропуская.

## 1) Подготовка (один раз)

1. Открой терминал в папке проекта `MAX`.
2. Выполни:

```bash
npm install
cp .env.example .env
```

3. В `.env` должны быть заполнены минимум:
   - `BOT_TOKEN`
   - `OWNER_USER_ID`

## 2) Запуск бота

В терминале:

```bash
npm run dev
```

Если видишь `bot_started` и `admin_panel_started` — все ок.

## 3) Быстрая проверка, что бот жив

В новом терминале:

```bash
npm run human:test
```

Если в выводе везде `[OK]` — можно идти в MAX.

## 4) Как пользоваться в MAX (обычный пользователь)

Открой чат с ботом и отправь:

1. `/start`
2. `/guide`
3. `/help`

Дальше:
- Нажимай кнопку `Инструкция для пользователя`.
- Нажимай `FAQ`, если что-то не ясно.
- Для участия в конкурсе: нажми кнопку `Участвовать` под постом конкурса.

## 5) Как пользоваться в MAX (администратор)

Скопируй и выполняй по очереди:

1. Создать конкурс:

```text
/newcontest Тестовый розыгрыш | 2026-12-31T20:00:00Z | 1
```

2. Посмотреть список:

```text
/contests
```

3. Опубликовать конкурс:

```text
/publish contest_id chat_id Текст поста
```

4. Провести розыгрыш:

```text
/draw contest_id
```

5. Проверить честность:

```text
/proof contest_id
```

## 6) Мастер-сценарий (самый простой путь для админа)

В MAX:
1. `/wizard`
2. Нажми `1) Создать демо`
3. Нажми `2) Опубликовать сюда`
4. Нажми `3) Статус`
5. Нажми `4) Draw`
6. Нажми `5) Proof`

Это самый быстрый способ проверить весь цикл.

## 7) Админ-панель: что важно

- В MAX кнопка админки открывается только для публичного `https` URL.
- Если у тебя `localhost`, это нормально для локального теста, но кнопка в MAX может не открыться.
- Для “как в проде” подними tunnel:

```bash
npm run tunnel:up
```

## 8) Что делать, если не работает

1. Проверить, что процесс бота запущен:
   - в терминале должен идти `npm run dev`.
2. Проверить health:

```bash
curl -s http://127.0.0.1:8787/health
curl -s http://127.0.0.1:8787/health/ready
```

3. Проверить роль:

```text
/myrole
```

4. Если команда админская и пишет “нет доступа” — проверь `OWNER_USER_ID` / `ADMIN_USER_IDS` в `.env`.

## 9) Готовый маршрут “проверить за 5 минут”

1. `npm run dev`
2. `npm run human:test`
3. В MAX: `/start` -> `/help` -> `/wizard`
4. Пройти wizard шаги 1..5
5. Убедиться, что draw/proof работают

Если это прошло — бот готов к использованию.
